<% name_units = Rms::PerfType.index_units %>
<%board :class=>"" do%>
  <%board_header do%>
    <% @chart_sets.each do |val| %>
      <%=link_to val[0],params.merge({:chart_seq=>val[1]}),:class=>val[1].to_s.eql?(params[:chart_seq].to_s)?'current ui-state-active ui-corner-top':nil,:style =>"padding:.4em;margin:0 .2em;" %>
    <% end %>
  <%end%>
  <%board_content do%>
    <div class="clearfix">
      <div style="width:20%;float:left;height:300px;overflow:auto;">
        <ol class="ol" id="kpilist">
          <%  @kpilist_data.each do |val| %>
            <%=content_tag :li,link_to(val['name_cn']+ (name_units[val['name_cn']].nil? ? "":"(#{name_units[val['name_cn']]})"),params.merge({:kpi_name=>val['name_cn']})),:class=>params[:kpi_name]==val['name_cn']?'ui-state-light current ui-corner-all':nil,:style =>"padding:.2em .5em;" %>
          <% end %>
        </ol>
      </div>
      <div style="width:80%;float:left;"> 
        <div align="center" id="report_chart">
          <%#=image_tag url_for(:action =>"chart",:id =>params[:id],:chart_seq =>params[:chart_seq],:format =>"png",:kpi_name => params[:kpi_name], :sort => params[:sort]) %>
        </div>
      </div>
    </div>
  <%end%>
<%end%>
  <script>
    $(function(){
     $("#report_chart").load("<%=url_for(:action =>"chart",:id =>params[:id],:chart_seq =>params[:chart_seq],:kpi_name => params[:kpi_name]) %>");
    });
  </script>
